<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Clustered Forward+ Lighting</title>
  <style>
    html, body { height: 100%; margin: 0; font-family: sans-serif; }
    #app { display: flex; height: 100%; }
    #container { flex: 1; position: relative; background: #111; }
    canvas { width: 100%; height: 100%; display: block; }
    #controls {
      width: 300px;
      background: #222;
      color: #fff;
      padding: 20px;
      overflow-y: auto;
    }
    #controls h2 { margin-top: 0; }
    #controls label {
      display: block;
      margin: 10px 0 5px;
    }
    #controls input[type="range"] {
      width: 100%;
    }
    #controls button {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      background: #444;
      color: #fff;
      border: none;
      cursor: pointer;
    }
    #controls button:hover {
      background: #555;
    }
    .stat {
      display: flex;
      justify-content: space-between;
      padding: 5px 0;
      border-bottom: 1px solid #444;
    }
  </style>
</head>
<body>
  <div id="app">
    <div id="container"></div>
    <div id="controls">
      <h2>Clustered Forward+</h2>

      <div class="stat">
        <span>FPS:</span>
        <span id="fps">0</span>
      </div>
      <div class="stat">
        <span>Lights:</span>
        <span id="light-count">0</span>
      </div>
      <div class="stat">
        <span>Clusters:</span>
        <span id="cluster-count">0</span>
      </div>
      <div class="stat">
        <span>Avg Lights/Cluster:</span>
        <span id="avg-lights">0</span>
      </div>

      <label for="light-slider">Number of Lights: <span id="light-value">100</span></label>
      <input type="range" id="light-slider" min="10" max="500" value="100" step="10">

      <label for="grid-x">Grid Size X: <span id="grid-x-value">16</span></label>
      <input type="range" id="grid-x" min="8" max="32" value="16" step="4">

      <label for="grid-y">Grid Size Y: <span id="grid-y-value">9</span></label>
      <input type="range" id="grid-y" min="4" max="16" value="9" step="1">

      <label for="grid-z">Grid Size Z: <span id="grid-z-value">24</span></label>
      <input type="range" id="grid-z" min="8" max="48" value="24" step="4">

      <button id="toggle-animation">Pause Animation</button>
      <button id="toggle-debug">Show Cluster Heatmap</button>
      <button id="reset">Reset Scene</button>

      <h3>Info</h3>
      <p style="font-size: 12px; line-height: 1.5;">
        This demo shows clustered forward+ rendering with dynamic lights.
        The view frustum is divided into a 3D grid, and lights are assigned
        to clusters. Each pixel only processes lights in its cluster.
      </p>
    </div>
  </div>
  <script type="module" src="./script.ts"></script>
</body>
</html>
